<!DOCTYPE html>
<!-- saved from url=(0072)https://maoyan.com/xseats/201909200322027?movieId=1277982&cinemaId=23966 -->
<html><!--<![endif]-->
<head>
    <title>选座</title>
    <!-- for-mobile-apps -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content=""/>
    <script src="/web/js/vue.js"></script>
    <!-- //for-mobile-apps -->
    <link rel="stylesheet" href="/web/ltcss/cinemas-seat.b8adee6e.css">
    <link href="/web/css/bootstrap.css" rel="stylesheet" type="text/css" media="all"/>

    <link rel="stylesheet" href="/web/ltcss/style1.css">
    <link rel="stylesheet" href="/web/ltcss/style.css">

    <script type="text/javascript" src="/web/js/jquery-2.1.4.min.js"></script>
    <!-- //js -->
    <!---<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,700italic,700,400italic,300italic,300' rel='stylesheet' type='text/css'>--->
    <!-- start-smoth-scrolling -->
    <script type="text/javascript" src="/web/js/move-top.js"></script>
    <script type="text/javascript" src="/web/js/easing.js"></script>

    <!-- start-smoth-scrolling -->
    <!-- tables -->
    <link rel="stylesheet" type="text/css" href="/web/ltcss/order-detail.3a8a0a18.css"/>
    <link rel="stylesheet" type="text/css" href="/web/ltcss/profile-profile.13d06bf4.css"/>
    <link rel="stylesheet" type="text/css" href="/web/list-css/basictable.css"/>
    <script type="text/javascript" src="/web/list-js/jquery.basictable.min.js"></script>
    <script type="text/javascript" src="/web/js/vue.js"></script>


    <link rel="stylesheet" href="/web/ltcss/style1.css">
    <link rel="icon" type="image/png" href="/web/assets/img/favcion.png"/>
    <link rel="stylesheet" type="text/css" href="/web/assets/css/icofont.css" media="all"/>
</head>
<body>
<!--
    作者：offline
    时间：2019-09-09
    描述：头部
-->
<div id="apphead">
    <!-- header -->
    <header  class="header" style="background-color: #0a0910">
        <div class="container">
            <div class="header-area">
                <div class="logo">
                    <a href="/web/feng/index.html"><img   src="/web/assets/img/logo.png" alt="logo"/></a>
                </div>


                <div class="menu-area">
                    <div class="responsive-menu"></div>
                    <div class="mainmenu">
                        <ul id="primary-menu">
                            <li><a class="active" href="/web/feng/index.html">首页</a></li>
                            <li><a href="/web/tao/mtype.html">电影</a></li>
                            <li><a href="/web/tao/cinema-jump.html">影城</a></li>
                            <li><a href="/web/feng/hotmovies2.html">热映电影</a></li>
                            <li><a href="https://ent.sina.com.cn/film/">热点</a></li>
                            <li><a href="#">帮助 <i class="icofont icofont-simple-down"></i></a>
                                <ul>
                                    <li><a onclick="showModel()" href="#">用户须知</a></li>
                                    <li><a href="#">联系客服</a></li>
                                </ul>
                            </li>
                            <li v-show="user.username==null"><a class="login-popup" href="#" >登录</a>
                                <!--<a  v-show="username!=null" v-text="username" >登录</a>-->
                            </li>
                            <li v-show="user.username==null" style="margin-left: 5px"><a class="register-popup" href="#">注册</a></li>
                            <li style="margin-right: 10px" v-show="!user.username==''" id="user-center">
                                <img v-show="user.upic==''" src="/web/ltimg/defaultpic.png" style="width: 32px;height: 32px;border-radius:50%">
                                <img v-show="!user.upic==''" :src="user.upic" style="width: 32px;height: 32px;border-radius:50%">
                                <a href="javascript:;" v-text="user.username"></a>
                                <ul class="person-ul" style="display: block" >
                                    <li style="width: 100px"><a class="person-li" href="/web/profile/orders.html">个人中心</a></li>


                                    <li><a class="person-li" href="javascript:;" onclick="userlogout()">退出</a></li>
                                </ul>
                            </li>
                            <!--<li><a class="theme-btn" href="#"><i class="icofont icofont-ticket"></i> 购票</a></li>-->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="login-area" id="myidlogin">
        <div class="login-box">
            <a href="#"><i class="icofont icofont-close"></i></a>
            <h2 >登录</h2>
            <form  id ="logform" action="/api-user/user/login">
                <h6>用户名</h6>
                <input type="text" id="loginuser" name="username" placeholder="请输入用户名"/>
                <span id="ulmsg" class="msg"></span>
                <h6>密码</h6>
                <input type="password" id="loginpwd" name="password" placeholder="请输入密码"/>
                <span id="plmsg" class="msg"></span>
                <div>
                    <div class="col-lg-8">
                        <div style="float: left;">
                        <span class="hvr-shrink" style="color: blueviolet;font-size: 15px;font-family: 黑体;cursor: pointer" onclick="loginbyphone()">
                            <svg t="1569485567198" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1130" width="16" height="16"><path d="M717.72292 66.790172 310.008055 66.790172c-48.50676 0-87.971587 39.534412-87.971587 88.1302l0 48.489364 0 583.991638 0 78.821183c0 48.52518 39.463804 87.986937 87.971587 87.986937l407.714865 0c48.594765 0 88.1302-39.461757 88.1302-87.986937l0-78.821183L805.85312 203.409736l0-48.489364C805.85312 106.325607 766.317685 66.790172 717.72292 66.790172M276.401656 257.772878l475.086276 0L751.487931 733.038232 276.401656 733.038232 276.401656 257.772878zM751.487931 866.222557c0 18.545378-15.148002 33.622772-33.765011 33.622772L310.008055 899.845329c-18.527982 0-33.606399-15.077394-33.606399-33.622772l0-78.821183 475.086276 0L751.487931 866.222557zM276.401656 203.409736l0-48.489364c0-18.61701 15.078417-33.766035 33.606399-33.766035l407.714865 0c18.61701 0 33.765011 15.149025 33.765011 33.766035l0 48.489364L276.401656 203.409736zM513.963213 893.085368c27.323299 0 49.480948-22.155603 49.480948-49.514717 0-27.324322-22.156626-49.479925-49.480948-49.479925-27.359115 0-49.498344 22.154579-49.498344 49.479925C464.464869 870.929766 486.603075 893.085368 513.963213 893.085368M546.667056 153.751756l-65.426105 0c-6.813173 0-12.33391 5.52176-12.33391 12.317537 0 6.830569 5.520737 12.352329 12.33391 12.352329l65.426105 0c6.795776 0 12.351306-5.52176 12.351306-12.352329C559.018362 159.273517 553.461809 153.751756 546.667056 153.751756" p-id="1131"></path></svg>
                            点我进入手机登陆
                        </span>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div style="float: right;" class="login-remember">
                            <input id="rem" name="rem" type="checkbox"/>
                            <label for="rem" style="font-size: 15px;font-family: 'Franklin Gothic Medium';">记住我</label>
                        </div>
                    </div>
                </div>
                <a @click="login()" class="theme-btn">登录</a>
            </form>
        </div>
    </div>
    <div style="display: none;" class="login-area" id="myphonelogin">
        <div class="login-box">
            <a href="#"><i class="icofont icofont-close"></i></a>
            <h2 >登录</h2>
            <form  id ="telform" action="/api-user/user/login">
                <h6>手机号</h6>
                <input type="tel" id="phonenum" name="telphone" placeholder="请输入手机号"/>
                <span id="telmsg" class="msg"></span>
                <div>
                    <input class="col-lg-8" id="mycode" type="text" placeholder="验证码..." style="border: none;outline: none;border-bottom: orange 5px solid">
                    <input class=" btn btn-success" type="button" onclick="getcode(this)" style="font-size: 13px;text-align: center!important;float: right;margin-top: 10px;background-color: red" value="获取验证码">
                    <span id="codemsg" class="msg"></span>
                </div>
                <div style="float: left;">
                    <span class="hvr-shrink" style="color: blueviolet;font-size: 15px;font-family: 黑体;cursor: pointer" onclick="loginbyid()">
                        <svg t="1569486963559" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2521" width="16" height="16"><path d="M939.904 821.333333a439.296 439.296 0 0 0-306.346667-317.994666 233.258667 233.258667 0 0 0 111.573334-198.869334c0-128.554667-104.576-233.173333-233.130667-233.173333S278.869333 175.914667 278.869333 304.469333a233.258667 233.258667 0 0 0 111.573334 198.869334 439.296 439.296 0 0 0-306.346667 317.994666 103.594667 103.594667 0 0 0 19.541333 89.088c21.034667 26.88 52.608 42.24 86.613334 42.24H833.706667a109.226667 109.226667 0 0 0 86.613333-42.24c20.138667-25.6 27.221333-58.069333 19.584-89.088zM330.069333 304.469333c0-100.352 81.621333-181.973333 181.930667-181.973333s181.930667 81.621333 181.930667 181.973333S612.352 486.4 512 486.4 330.069333 404.778667 330.069333 304.469333z m549.973334 574.421334a59.306667 59.306667 0 0 1-46.336 22.613333H190.250667a59.306667 59.306667 0 0 1-46.336-22.613333 52.096 52.096 0 0 1-10.154667-45.312C176.725333 659.328 332.245333 537.6 512 537.6s335.274667 121.728 378.197333 295.978667a52.053333 52.053333 0 0 1-10.154666 45.312z" p-id="2522" fill="#515151"></path></svg>
                        点我进入用户名登陆
                    </span>
                </div>
                <a @click="login()" class="theme-btn">手机登录</a>
            </form>
        </div>
    </div>
    <div class="login-area" id="myregister">
        <div class="login-box register-box">
            <a href="#"><i class="icofont icofont-close"></i></a>
            <h2 >注册</h2>
            <form id ="reform" action="/api-user/user/register">
                <h6>用户名</h6>
                <input class="name_input reginput" id="reguser" type="text" name="username" placeholder="请输入用户名"/>
                <span id="urmsg" class="msg">用户名不得全为数字，不含特殊字符，支持中文</span>
                <h6>密码</h6>
                <input class="pwd_input reginput" id="regpwd" type="password" name="password" placeholder="请输入密码"/>
                <span id="rpmsg" class="msg">密码不得少于6位</span>
                <h6>确认密码</h6>
                <input class="repwd_input reginput" id="repwd" type="password" name="repwd" placeholder="请确认密码"/>
                <span id="remsg" class="msg"></span>
                <div style="margin-bottom: 20px;">
                    <h6>手机号</h6>
                    <input class="tel_input reginput" id="sendphone" style="float: left" type="tel" name="telphone" placeholder="请输入手机号" />
                    <span id="regtel" class="msg"></span>
                    <div>
                        <input class="col-lg-8" id="myregcode" type="text" name="code" placeholder="验证码..." style="border: none;outline: none;border-bottom: orange 5px solid">
                        <input type="button" class="btn btn-danger" style="font-size: 13px;text-align: center!important;float: right;margin-top: 10px;background-color: red" onclick="getcode(this)" value="获取验证码">
                        <span id="regcode" class="msg"></span>
                    </div>
                </div>
                <div>
                    <a @click="register()" class="theme-btn">注册</a>
                </div>
            </form>
        </div>
    </div>
    <div class="buy-ticket" id="mymodel">
        <div class="container">
            <div class="buy-ticket-area">
                <a href="#"><i class="icofont icofont-close"></i></a>
                <h3 style="text-align: center; color: black;font-weight: 900">用户须知</h3>
                <p> 欢迎您使用爱乐平台服务（“本服务”）。在登录爱乐平台或使用本服务前，您应当首先阅读并同意接受《爱乐用户服务协议》（“本协议”）的全部内容。在点击确认本协议之前，请您务必仔细阅读本协议的全部内容，特别是免除或限制责任条款等以粗体格式重点标示的条款。阅读本协议过程中，如果您不同意本协议的任意内容，或者无法准确理解，请不要同意本协议或登录使用本协议项下的服务，否则，即表示您已接受了本协议的条款和条件，同意受本协议约束。

                    一、定义

                    1.1 “爱乐平台”或“本平台”：重庆爱乐文化传媒有限公司运营和管理的提供在线票务等服务的网络平台（maoyan.com等）,以及重庆爱乐文化传媒有限公司或其关联方有权运营或管理的爱乐合作平台，包括但不限于美团网站及客户端电影/演出频道、大众点评网站及客户端电影/演出频道、格瓦拉客户端、微信钱包电影演出赛事入口、微信小程序等。

                    1.2 “本服务”：通过本平台向用户提供的在线票务服务、以及影视行业相关服务，包括但不限于面向用户提供影视/演出相关排片/活动信息、在线选座购票/购票、用户交流及评价、影视/演出信息介绍、影视相关票房信息查询、衍生品销售以及其他爱乐平台上展示和提供的服务。该等服务由爱乐相关主体或者相关合作方（统称“服务方”）提供。

                    1.3 “用户”：接受并同意本协议全部条款及本平台发布的其他全部服务条款和操作规则的用户。

                    二、基本原则

                    2.1 本平台为第三方平台，为用户与本平台上相关服务/产品经营者之间提供网页空间、虚拟经营场所、交易撮合、信息发布等服务，供交易各方独立开展交易活动的信息网络系统。

                    2.2 用户通过本平台使用经营者所提供服务的，应当同时遵守本协议、相关服务协议（如有）、以及本平台的相关规则、通知、要求。该等服务协议、平台规则、通知、要求等与本协议条款共同构成本协议的全部内容。

                    2.3 用户同意并确认，本平台有权随时根据运营和管理的需要，对本协议内容进行修订和变更，修订或变更后的文本将在本平台上依法予以公示。如用户在本协议修订或变更后的文本生效后，仍然继续使用本服务的，即表示用户已充分阅读、理解并同意接受修订或变更后的协议内容；如用户不同意修改后的协议内容，用户应立即停止使用本服务。 >
                    三、 用户服务

                    3.1 本平台为服务方以及用户之间通过本平台进行电影票务、演出票务、衍生品等商品或服务的网络交易活动提供网络交易平台服务。服务方负责向用户提供相应商品或服务。根据市场需要，结合各业务的不同特点，可能向用户收取一定的服务费用，具体服务费用以用户购买页面中展示信息为准。

                    3.2 本平台所提供的影视/演出的排片/活动、节目信息、选座（如有）等相关信息、以及售卖规则（包括但不限于购买规则、退改签规则等），均由影视/演出相关权利人（包括但不限于影院、影片出品方、演出主办方等）提供或制定。详见用户购买页面所展示信息。

                    3.3 本平台所发布的广告或商品/服务展示内容，如有任何侵权行为，本平台将依法根据权利人的通知或者径行做出删除等处理。

                    3.4 用户可通过本平台使用相关服务方提供的商品或服务、进行相应评论，但应当遵守法律规定以及本协议约定。

                    3.5 用户通过本平台购买相应商品或服务的，应当提供获取该等商品或服务所必需的信息（包括但不限于手机号码等）。用户应当保证所提供信息的真实、准确、合法、完整。否则，如因用户所提供信息存在问题而导致用户无法享受相关商品或服务的，用户应当自行承担责任。

                    3.6 用户实际消费过程中，如果发现服务方所提供商品或服务存在任何问题，应与相关服务方自行协商解决。同时，用户也可以通知本平台，本平台或服务方将依法向用户提供必要信息并协助用户与经营者解决争议。
                </p>
            </div>
        </div>
    </div><!-- header section end -->
</div>
<script src="/web/js/vue.js"></script>
<script src="/web/assets/js/main.js"></script>

<script type="text/javascript">


    function showModel() {
        $(".buy-ticket").slideDown();
    }
    function loginbyphone() {
        $("#myidlogin").hide();
        $("#myphonelogin").show();
    }
    function loginbyid() {
        $("#myidlogin").show();
        $("#myphonelogin").hide();
    }
    var t ;
    function getcode(th) {
        $.ajax({
            url:"/api-user/user/sendCode",
            data:{"phone":$(th).parent().prev().prev().val()},
            dataType:"json",
            type:"get",
            success:function (rt) {
                $(th).attr("disabled","disabled");
                var second = 10;
                t = setInterval(function () {
                    $(th).val(second+"s重发");
                    second -= 1;
                    console.log("second==="+second);
                    if(second<=-1){
                        $(th).removeAttr("disabled");
                        $(th).val("获取验证码");
                        clearInterval(t);60
                    }
                },1000)
            }
        });
    }
    function userlogout() {
        $.ajax({
            url:"/api-user/user/userlogout",
            dataType:"json",
            type:"delete",
            success:function (rt) {
                if(rt.code=="success"){
                    apphead.user = {};
                    var mydate=new Date();
                    mydate.setTime(-1000);
                    document.cookie="loguser=0;path=/;expires="+new Date(0).toUTCString();
                }
            }
        });
    }



    window.onload=function () {
        $.getScript('/web/assets/js/jquery.slicknav.min.js',function(){
        });
        $.getScript('/web/assets/js/owl.carousel.min.js',function(){
        });
        $.getScript('/web/assets/js/owl.carousel.min.js',function(){
        });
        $.getScript('/web/assets/js/isotope.pkgd.min.js',function(){
        });
        $.getScript('/web/assets/js/main.js',function(){
        });



        $("#user-center").mouseover(function () {
            $(".person-ul").stop(true);
            $(".person-ul").slideDown(500);
        })
        $("#user-center").mouseleave(function () {
            $(".person-ul").stop(true);
            $(".person-ul").slideUp(500);
        })
        //用户名登录验证
        function lucheck() {
            var pattern = new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>《》/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]");
            /*var reg = new RegExp("[\\u4E00-\\u9FFF]+","g");*/
            if((/^[0-9]+$/.test($("#loginuser").val()))){
                $("#ulmsg").text("用户名不能全为数字")
            }else if(/^[a-zA-Z]+$/.test($("#loginuser").val())){
                $("#ulmsg").text("用户名不得全为字母")
            }else if($("#loginuser").val().length<2){
                $("#ulmsg").text("用户名不少于两位")
            }else if(pattern.test($("#loginuser").val())){
                $("#ulmsg").text("用户名不得含有特殊字符")
            }
        }
        //登录密码验证
        function lpwdcheck() {
            if($("#loginpwd").val().length<6){
                $("#plmsg").text("密码不得少于六位")
            }else if(/^[a-zA-Z]+$/.test($("#loginpwd").val())){
                $("#plmsg").text("密码不得全为字母")
            }
        }
        //登录手机号验证
        function lpcheck() {
            var myreg = /^1[3456789]\d{9}$/;
            if(!myreg.test($("#phonenum").val())){
                $("#telmsg").text("手机号码不合法")
            }
        }
        $("#loginuser").blur(function () {
            lucheck();
        })
        $("#loginuser").focus(function () {
            $("#ulmsg").empty();
        })
        $("#loginpwd").blur(function () {
            lpwdcheck();
        })
        $("#loginpwd").focus(function () {
            $("#plmsg").empty();
        })
        $("#phonenum").blur(function () {
            lpcheck();
        })
        $("#phonenum").focus(function () {
            $("#telmsg").empty();
        })
        //注册用户名验证
        function rucheck() {
            var pattern = new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>《》/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]");
            /*var reg = new RegExp("[\\u4E00-\\u9FFF]+","g");*/
            if((/^[0-9]+$/.test($("#reguser").val()))){
                $("#urmsg").text("用户名不能全为数字")
            }else if(pattern.test($("#reguser").val())){
                $("#urmsg").text("用户名不得含有特殊字符")
            }else if($("#reguser").val().length<2){
                $("#urmsg").text("用户名至少两位")
            }
        }
        //注册密码验证
        function rpwdcheck() {
            if($("#regpwd").val().length<6){
                $("#rmsg").text("密码不得少于六位")
            }else if(/^[a-zA-Z]+$/.test($("#loginpwd").val())){
                $("#rpmsg").text("密码不得全为字母")
            }
        }
        //注册密码确认验证
        function recheck() {
            if($("#repwd").val()!=$("#regpwd").val()){
                $("#remsg").text("密码输入不一致")
            }
        }
        //注册手机号验证
        function rpcheck() {
            var myreg = /^1[3456789]\d{9}$/;
            if(!myreg.test($("#sendphone").val())){
                $("#regtel").text("手机号码不合法")
            }
        }
        $("#reguser").blur(function () {
            rucheck();
        })
        $("#reguser").focus(function () {
            $("#urmsg").empty();
        })
        $("#regpwd").blur(function () {
            rpwdcheck();
        })
        $("#regpwd").focus(function () {
            $("#rpmsg").empty();
        })
        $("#repwd").blur(function () {
            recheck();
        })
        $("#repwd").focus(function () {
            $("#remsg").empty();
        })
        $("#phonenum").blur(function () {
            rpcheck();
        })
        $("#phonenum").focus(function () {
            $("#regtel").empty();
        })
        $("#mycode").focus(function () {
            $("#codemsg").empty();
        })
        $("#myregcode").focus(function () {
            $("#regcode").empty();
        })
    }





</script>
<script type="text/javascript">
    var apphead=new Vue({
        el:"#apphead",
        data:{

            user:{}
        },
        created:function () {
            var _this=this;
            var cookies=document.cookie.split(";");
            var myuser;
            var a = "loguser";
            for(var i=0;i<cookies.length;i++){
                if(a==cookies[i].split("=")[0].trim()){
                    var user = cookies[i].split("=")[1];
                    console.log("---"+user);
                    myuser = decodeURIComponent(user);
                    console.log("===="+myuser);
                }
            }
            if(myuser!=null){
                _this.user = $.parseJSON(myuser);
            }

        },
        methods: {
            login() {

                var obj = this;
                var flag = false;
                for(var i=0;i<$("#logform .msg").length;i++){
                    if($("#logform .msg").eq(i).text()==null||$("#logform .msg").eq(i).text()==""){
                        flag =true;
                    }
                }
                for(var i=0;i<$("#telform .msg").length;i++){
                    if($("#telform .msg").eq(i).text()==null||$("#telform .msg").eq(i).text()==""){
                        flag =true;
                    }
                }
                if(flag==true){
                    $.ajax({
                        url: "/api-user/user/login",
                        data: {"username":$("#loginuser").val(),"password":$("#loginpwd").val(),
                            "phonenum":$("#phonenum").val(),"code":$("#mycode").val()},
                        type: "post",
                        dataType: "json",
                        success: function (data) {
                            if (data.code = "success") {
                                $(".login-area").slideUp(1000);
                                obj.user = data.object;
                            }else if(data.code=="error"){
                                alert(data.message);
                            }else if(data.code=="ufail"){
                                $("#ulmsg").text(data.message);
                            }else if(data.code=="pwdfail"){
                                $("#plmsg").text(data.message);
                            }else if(date.code=="pfail"){
                                $("#telmsg").text(data.message);
                            }else if(data.code=="cfail"){
                                $("#codemsg").text(data.message);
                            }else{
                                alert(data.message);
                            }

                        }

                    })
                }
            },
            register(){
                var v =this;
                if($(".msg").text()==null||$(".msg").text()==""){
                    $.ajax({
                        url:"/api-user/user/register",
                        data:$("#reform").serialize(),
                        type:"get",
                        dataType:"json",
                        success:function (rt) {
                            alert(rt.message);
                            window.location.reload();
                        }
                    });
                }
            }
        }
    })
</script>


<div class="container" id="app" style="margin-bottom: 100px">
    <div class="order-progress-bar">
        <div class="step first done">
            <span class="step-num">1</span>
            <div class="bar"></div>
            <span class="step-text">选择影片场次</span>
        </div>
        <div class="step done">
            <span class="step-num">2</span>
            <div class="bar"></div>
            <span class="step-text">选择座位</span>
        </div>
        <div class="step ">
            <span class="step-num">3</span>
            <div class="bar"></div>
            <span class="step-text">15分钟内付款</span>
        </div>
        <div class="step last ">
            <span class="step-num">4</span>
            <div class="bar"></div>
            <span class="step-text">影院取票观影</span>
        </div>
    </div>


    <div class="main clearfix">
        <div class="hall col-lg-9">
            <div class="seat-example">
                <div class="selectable-example example">
                    <span>可选座位</span>
                </div>
                <div class="sold-example example">
                    <span>已售座位</span>
                </div>
                <div class="selected-example example">
                    <span>已选座位</span>
                </div>
            </div>


            <div class="seats-block" data-cols="12" data-section-id="1" data-section-name="普通区"
                 data-seq-no="201909200322027">
                <div class="row-id-container" >
                    <span class="row-id" v-for="row in msg.list" v-text="row.row"></span>

                </div>

                <div class="seats-container">
                    <div class="screen-container" style="left: 0px;">
                        <div class="screen">银幕中央</div>
                        <div class="c-screen-line"></div>
                    </div>
                    <div class="seats-wrapper">
                        <div class="row" v-for="row in msg.list">
                                <span v-for="son in row.son"
                                      :class="son.state=='N'?'seat selectable':son.state=='E' ?'seat empty' :'seat sold'"
                                      :data-column-id="son.column"
                                      :data-row-id="son.row" :data-st="son.state" :data-index="son.row+'-'+son.column"
                                      @click="choose($event)"  :data-id ="son.id"></span>
                        </div>

                    </div>
                </div>
            </div>


        </div>
        <div class="side col-lg-3">
            <div class="movie-info clearfix" >
                <div class="poster">
                    <img :src="movie.mpic">
                </div>
                <div class="content">
                    <p class="name text-ellipsis" v-text="movie.mname"></p>
                    <div class="info-item">
                        <span>类型 :</span>
                        <span class="value" v-for="type in movie.types" v-text="type.mtype"></span>
                    </div>
                    <div class="info-item">
                        <span>时长 :</span>
                        <span class="value" v-text="movie.longtime+'分钟'"></span>
                    </div>
                </div>
            </div>

            <div class="show-info">
                <div class="info-item">
                    <span>影院 :</span>
                    <span  class="value text-ellipsis" v-text="cinema.object.cName"></span>
                </div>
                <div class="info-item">
                    <span>影厅 :</span>
                    <span class="value text-ellipsis" v-text="cinema.object.rName"></span>
                </div>
                <div class="info-item">
                    <span>国家/地区 :</span>
                    <span class="value text-ellipsis" v-text="movie.comntry"></span>
                </div>
                <div class="info-item">
                    <span>场次 :</span>
                    <span  class="value text-ellipsis screen" v-text="cinema.object.formatTime"></span>
                </div>
                <div class="info-item">
                    <span>票价 :</span>
                    <span class="value text-ellipsis" v-text="'￥'+cinema.object.money+'/张'"></span>
                </div>
            </div>

            <div class="ticket-info">
                <!--  <div class="no-ticket">
                      <p class="buy-limit">座位：一次最多选6个座位</p>
                      <p class="no-selected">请<span>点击左侧</span>座位图选择座位</p>
                  </div>-->
                <div class="has-ticket">
                    <span class="text">座位：</span>
                    <div class="ticket-container">
                        <span v-for=" (seat,index) in seatList" v-show="index>=0" class="ticket" :data-row-id="seat.row"
                              :data-column-id="seat.column" :data-id="seat.id" :data-index="seat.row+'-'+seat.column"
                              v-text="seat.row+'排'+seat.column+'座'" @click="cancelTicket($event)"></span>

                    </div>
                </div>

                <div class="total-price" v-show="seatList.length>0">
                    <span>总价 :</span>
                    <span class="price" v-text="price"></span>
                </div>
            </div>

            <div class="confirm-order">
                <div class="cellphone">

                </div>
                <div :class="seatList.length>0?'confirm-btn':'confirm-btn disable'" data-act="confirm-click" data-bid="b_0a0ep6pp" @click="confirmTicket($event)">
                    确认选座
                </div>

            </div>
        </div>
    </div>
    <div class="modal-container" style="display: none;">
        <div class="modal1">
            <span class="icon"></span>
            <p class="tip">一次最多购买6张票</p>
            <div class="ok-btn btn" @click="btn($event)">我知道了</div>
        </div>
    </div>


</div>
<script type="text/javascript">
    var href = window.location.href;
    var msid = href.split("=")[1];




    function select(obj) {
        $.ajax({
            url: "/orders/selectSeat",
            data: {"msid": msid},
            type: "get",
            dataType: "json",
            success: function (data) {
                obj.msg = data;
            }
        })
    }

    function selectMovie(msid) {
        $.ajax({
            url: "/orders/selectmovie?msid="+msid ,
            type: "get",
            dataType: "json",
            success: function (data) {
                app.movie = data.object;
            }
        })
    }

    function selectCinema(msid) {
        $.ajax({
            url: "/orders/selectCinema?msid=" + msid,
            type: "get",
            dataType: "json",
            success: function (data) {
                if(data.codeMessage=="error"){
                  alert("该场次不在售票中")
                }else {
                    app.cinema = data;
                }


            }
        })
    }

    $(function () {
        $(".ticket").bind("click", function (e) {
            $(this).hide();
        });
    })


    var seatnum = 0;
    var app = new Vue({
        el: "#app",
        data: {
            msg: "",
            movie: "",
            cinema: "",
            seatList: [],
            price: ""


        },
        created: function () {
            var obj = this
            select(obj);
            selectMovie(msid)
            selectCinema(msid)

        },
        methods: {
            choose(e) {
                if ($(e.target).hasClass("seat selectable")) {
                    seatnum++;
                    if (seatnum <= 6) {
                        var row = $(e.target).attr("data-row-id")
                        var column = $(e.target).attr("data-column-id")
                        var id = $(e.target).attr("data-id");

                        $(e.target).removeClass("selectable");
                        $(e.target).addClass("selected");
                        this.seatList.push({"row": row, "column": column,"id":id});
                        this.price = this.cinema.object.money * seatnum;
                    } else {
                        seatnum--;
                        this.price = this.cinema.object.money * seatnum;
                        $(".modal-container").show()

                    }


                } else if ($(e.target).hasClass("seat selected")) {
                    $(e.target).removeClass("selected");
                    $(e.target).addClass("selectable");
                    var row = $(e.target).attr("data-row-id");
                    var column = $(e.target).attr("data-column-id");
                    var es = $(e.target).data("index");
                    let index = -1;
                    for (var i = 0; i < this.seatList.length; i++) {
                        if (this.seatList[i].row == row && this.seatList[i].column == column) {
                            index = i;
                        }
                    }
                    this.seatList.splice(index, 1)
                    seatnum--;
                    this.price = this.cinema.object.money * seatnum;
                }
            },
            btn(e) {
                $(e.target).parent().parent().hide();
            },
            cancel(e) {
                $(e.target).empty()
            },
            cancelTicket(e) {
                var row = $(e.target).attr("data-row-id");

                var column = $(e.target).attr("data-column-id");
                var s = $(e.target).attr("data-index");
                let index = -1;
                for (var i = 0; i < this.seatList.length; i++) {
                    if (this.seatList[i].row == row && this.seatList[i].column == column) {
                        index = i;
                    }
                }
                this.seatList.splice(index, 1)
                $(".selected").each(function () {
                    var e = $(this);
                    if (e.data("index") == s) {
                        e.removeClass("selected");
                        e.addClass("selectable");
                    }
                })
                seatnum--;
                this.price = this.cinema.object.money * seatnum;
            }, confirmTicket(e) {
                if(!$(e.target).hasClass("disable")){
                     var s;
                //不知道序列化数组对象，只有拼接
                for (var i = 0; i < this.seatList.length; i++) {
                    var data = this.seatList[i].id;

                    if (i == 0) {
                        s = "id=" + data
                    } else {
                        s = s + "&id=" + data;
                    }

                }
                $.ajax({
                    url: "/orders/profile/orders/confirm/",
                    data: s + "&msid=" + msid+"&cid="+app.cinema.cid,
                    type: "get",
                    dataType: "json",
                    success: function (data) {
                        if (data.code == "200") {
                            window.location.href = data.object;
                        } else {
                            alert("选座失败")
                            window.location.reload(true)
                        }

                    }
                })

                }


            }
        }
    })
</script>


<div class="footer">
    <div class="container">
        <div class="w3ls_footer_grid">
            <div class="col-md-6 w3ls_footer_grid_left">
                <div class="w3ls_footer_grid_left1">
                    <h3>关于爱乐</h3>
                    <div class="w3ls_footer_grid_left1_pos">
                        <div class="bottom-row">
                            <span>商务合作邮箱：971872973@qq.com</span>
                            <span class="bt-line">|</span>
                            <span>客服电话：17603649546</span>
                        </div>
                        <div class="bottom-row">
                            <span>用户投诉邮箱：1099773854@qq.com</span>
                            <span class="bt-line">|</span>
                            <span>友情链接：<a href="https://cq.meituan.com/?utm_source=wwwmaoyan"
                                          class="bottom-chain">美团网</a></span>
                        </div>
                        <div class="bottom-row">
                            <a href="#" class="bottom-chain">中华人民共和国增值电信业务经营许可证&nbsp;渝A1-20190909</a>
                        </div>
                        <div class="bottom-row">
                            <a href="#" class="bottom-chain">网络文化经营许可证&nbsp;京网文(2019)3897-330号</a>
                        </div>
                        <div class="bottom-row">
                            <a href="#" class="bottom-chain">爱乐用户服务协议</a>
                            <span class="bt-line">|</span>
                            <a href="#" class="bottom-chain">爱乐平台交易规则总则</a>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 w3ls_footer_grid_right">
                <a href="index.html"><h2 class="title">爱乐<span id="webtitle-bottom">电影</span></h2></a>
            </div>
            <div class="clearfix"></div>
        </div>
        <div class="col-md-5 w3ls_footer_grid1_left">
            <p>重庆爱乐文化传媒有限公司©2016 爱乐电影 aiyue.com </p>
        </div>
        <div class="col-md-7 w3ls_footer_grid1_right">
            <div class="col-lg-6 card-left">
                <a href="#"><img src="/web/images/web-permission.png"/></a>

            </div>
            <div class="col-lg-6 card-right">
                <a href="#"><img src="/web/images/permission-card.png"/></a>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
</div>


</body>
</html>